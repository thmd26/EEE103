<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loops in C - EEE 103 L5</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin:0; padding:0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; }
        .code-line { font-family: 'Consolas', 'Monaco', 'Courier New', monospace; line-height:1.9; }
    </style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect } = React;

const Eye = () => (
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
);
const EyeOff = () => (
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>
);

const L5 = () => {
    const [currentSlide, setCurrentSlide] = useState(0);
    const [revealed, setRevealed] = useState({});

    const slides = [
        // Slide 1: Title
        {
            type: 'title',
            content: {
                course: 'EEE 103 - Computer Programming',
                lecture: 'L5 - Loops',
                part: 'Part 2: Loops',
                faculty: 'Sk Tahmed Salim Rafid'
            }
        },

        // Slide 2: What is loop
        {
            type: 'concept',
            title: 'What is a loop?',
            points: [
                'The ability to repeat a block of code a number of times.',
                'A loop executes a piece of code repeatedly until a condition is met.',
                'When we use loops: iterate over data, repeat tasks, or wait for a condition.',
                'Common loop types: while, do...while, for'
            ]
        },

        // Slide 3: While loop syntax
        {
            type: 'statement-intro',
            title: 'while loop - Syntax',
            description: 'The while loop checks the condition first. If true, it runs the body and repeats.',
            syntax: 'loop variable\nwhile (condition) {\n    statements;\n    increment/decrement;\n}',
            explanation: [
                'loop variable: a control variable that usually changes inside the loop',
                'while(condition) { ... } : condition evaluated before each iteration',
                'Body executes only if condition is true',
                'Use increment (i++) or decrement (i--) to eventually make condition false'
            ]
        },

        // Slide 4: Print 0 to 9 using while loop (code with revealGroups)
        {
            type: 'code-with-output',
            title: 'Print 0 to 9 using while loop',
            description: '',
            code: [
                '#include <stdio.h>',
                '',
                'int main() {',                 //2
                '    int i = 0;  // Initialize counter',
                '    // loop starts here',
                '    while (i < 10) {',         //5
                '        printf("%d ", i);',
                '        i++;  // Increment counter',
                '    }',                        //8
                '    return 0;',
                '}',
            ],
            // revealGroups: arrays of line indices (0-based). Each group reveals together.
            // note: braces shown together: lines 2 and 10 (opening and closing) are grouped accordingly
            revealGroups: [[0], [2,10], [3], [4,5], [6,7,8,9]],
            output: '0 1 2 3 4 5 6 7 8 9'
        },

        // Slide 5: do while syntax
        {
            type: 'statement-intro',
            title: 'do...while loop - Syntax',
            description: 'The do...while loop executes the body first, then checks the condition. It runs at least once.',
            syntax: 'do {\n    statements;\n    increment;\n} while (condition);',
            explanation: [
                'Condition checking is at the bottom',
                'Will execute at least once even if condition is false',
                'Common error: forgetting the semicolon after while ("while(condition);")'
            ]
        },

        // Slide 6: Print 0 to 9 using do...while (user wrote while but meant do while)
        {
            type: 'code-with-output',
            title: 'Print 0 to 9 using do...while loop',
            description: 'do...while ensures the body runs at least once.',
            code: [
                '#include <stdio.h>',
                '',
                'int main() {',            //2
                '    int i = 0;  // Initialize counter',
                '    // loop starts here',
                '    do {',                 //5
                '        printf("%d ", i);',
                '        i++;  // Increment counter',
                '    } while (i < 10);',    //8
                '    return 0;',
                '}',
            ],
            revealGroups: [[0], [2,10], [3], [4,5], [6,7,8,9]],
            output: '0 1 2 3 4 5 6 7 8 9'
        },

        // Slide 7: Difference between while and do while (side by side)
        {
            type: 'compare',
            title: 'Difference: while vs do...while',
            left: {
                title: 'while loop (checked first)',
                code: [
                    'int i = 10;',
                    '',
                    'while (i < 10) {',
                    '    printf("%d\n", i);',
                    '    i++;',
                    '}',
                ],
                output: '(nothing) // condition false at start'
            },
            right: {
                title: 'do...while loop (body runs first)',
                code: [
                    'int i = 10;',
                    '',
                    'do {',
                    '    printf("%d\n", i);',
                    '    i++;',
                    '} while (i < 10);',
                ],
                output: '10 // runs once even though condition false'
            }
        },

        // Slide 8: for loop syntax
        {
            type: 'statement-intro',
            title: 'for loop - Syntax',
            description: 'for(initialize; condition; increment) { statements; }',
            syntax: 'for (initialization; condition; increment) {\n    // statements to repeat\n}',
            explanation: [
                'Give an initial value to the loop-control variable',
                'Test the loop-control variable against a target value',
                'If true: execute the statement(s) and perform increment; repeat',
                'If false: stop and continue with next line after loop'
            ]
        },

        // Slide 9: Print 0 to 9 using for loop
        {
            type: 'code-with-output',
            title: 'Print 0 to 9 using for loop',
            description: 'Compact and commonly used for counted loops. Reveal groups show structure clearly.',
            code: [
                '#include <stdio.h>',
                '',
                'int main() {',    //2
                '    int i;',
                '    for (i = 0; i < 10; i++) {', //4
                '        printf("%d ", i);',
                '    }', //6
                '    return 0;',
                '}',
            ],
            revealGroups: [[0], [2,8], [3], [4,5,6,7]],
            output: '0 1 2 3 4 5 6 7 8 9'
        },

        // Slide 10: Practice problems
        {
            type: 'practice',
            title: 'Practice Problems',
            problems: [
                'Print even numbers between 1 and N.',
                'Print all numbers between 1 and N divisible by 3 (or 5).',
                'Sum of first N numbers.',
                'Product of first N numbers.',
                'Print multiplication table for a given number.',
                'Factorial of N.',
                'Count numbers between 1 and 50 divisible by 3 and 5.',
                'Determine if a number is prime.'
            ]
        },

        // Thank you slide
        { type: 'thankyou' }
    ];

    // keyboard handling & reveal logic similar to your L4
    useEffect(() => {
        const onKey = (e) => {
            if (e.key === 'ArrowRight' || e.key === 'Tab') {
                e.preventDefault();
                if (currentSlide < slides.length - 1) { setCurrentSlide(s => s + 1); setRevealed({}); }
                return;
            }
            if (e.key === 'ArrowLeft') { if (currentSlide > 0) { setCurrentSlide(s => s - 1); setRevealed({}); } return; }

            if (e.key === 'b' || e.key === 'B') {
                e.preventDefault();
                // reveal all steps/groups for current slide
                const slide = slides[currentSlide];
                const newRevealed = { ...revealed };
                if (slide.type === 'concept') {
                    (slide.points || []).forEach((_,i) => newRevealed[`${currentSlide}-${i}`] = true);
                } else if (slide.type === 'statement-intro') {
                    (slide.explanation || []).forEach((_,i) => newRevealed[`${currentSlide}-${i}`] = true);
                } else if (slide.type === 'code-with-output') {
                    (slide.revealGroups || []).forEach((_,i) => newRevealed[`${currentSlide}-${i}`] = true);
                } else if (slide.type === 'flow-explanation') {
                    (slide.steps || []).forEach((_,i) => newRevealed[`${currentSlide}-${i}`] = true);
                }
                setRevealed(newRevealed);
                return;
            }

            if (e.key === 'ArrowDown' || e.key === ' ') {
                e.preventDefault();
                const slide = slides[currentSlide];
                // if slide has reveal groups, step through them
                if (slide.type === 'concept') {
                    const total = slide.points.length;
                    for (let i=0;i<total;i++) {
                        if (!revealed[`${currentSlide}-${i}`]) { setRevealed(r => ({...r,[`${currentSlide}-${i}`]: true})); return; }
                    }
                    if (currentSlide < slides.length -1) { setCurrentSlide(s => s+1); setRevealed({}); }
                } else if (slide.type === 'statement-intro') {
                    const total = slide.explanation.length;
                    for (let i=0;i<total;i++) {
                        if (!revealed[`${currentSlide}-${i}`]) { setRevealed(r => ({...r,[`${currentSlide}-${i}`]: true})); return; }
                    }
                    if (currentSlide < slides.length -1) { setCurrentSlide(s => s+1); setRevealed({}); }
                } else if (slide.type === 'code-with-output') {
                    const total = slide.revealGroups.length;
                    for (let i=0;i<total;i++) {
                        if (!revealed[`${currentSlide}-${i}`]) { setRevealed(r => ({...r,[`${currentSlide}-${i}`]: true})); return; }
                    }
                    if (currentSlide < slides.length -1) { setCurrentSlide(s => s+1); setRevealed({}); }
                } else {
                    if (currentSlide < slides.length -1) { setCurrentSlide(s => s+1); setRevealed({}); }
                }
            }

            if (e.key === 'ArrowUp') {
                e.preventDefault();
                const slide = slides[currentSlide];
                if (slide.type === 'concept') {
                    const total = slide.points.length;
                    for (let i=total-1;i>=0;i--) {
                        if (revealed[`${currentSlide}-${i}`]) { const nr = {...revealed}; delete nr[`${currentSlide}-${i}`]; setRevealed(nr); return; }
                    }
                    if (currentSlide > 0) { setCurrentSlide(s => s-1); setRevealed({}); }
                } else if (slide.type === 'statement-intro') {
                    const total = slide.explanation.length;
                    for (let i=total-1;i>=0;i--) {
                        if (revealed[`${currentSlide}-${i}`]) { const nr = {...revealed}; delete nr[`${currentSlide}-${i}`]; setRevealed(nr); return; }
                    }
                    if (currentSlide > 0) { setCurrentSlide(s => s-1); setRevealed({}); }
                } else if (slide.type === 'code-with-output') {
                    const total = slide.revealGroups.length;
                    for (let i=total-1;i>=0;i--) {
                        if (revealed[`${currentSlide}-${i}`]) { const nr = {...revealed}; delete nr[`${currentSlide}-${i}`]; setRevealed(nr); return; }
                    }
                    if (currentSlide > 0) { setCurrentSlide(s => s-1); setRevealed({}); }
                } else {
                    if (currentSlide > 0) { setCurrentSlide(s => s-1); setRevealed({}); }
                }
            }
        };
        window.addEventListener('keydown', onKey);
        return () => window.removeEventListener('keydown', onKey);
    }, [currentSlide, revealed]);

    const toggle = (k) => setRevealed(r => ({...r, [k]: !r[k]}));

    const slide = slides[currentSlide];

    return (
        <div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-blue-900 flex items-center justify-center p-4">
            <div className="bg-white rounded-xl shadow-2xl w-[1280px] h-[820px] max-w-[96vw] max-h-[96vh] overflow-hidden">
                <div className="p-8 h-full overflow-auto">
                    {/* Title */}
                    {slide.type === 'title' && (
                        <div className="h-full flex flex-col items-center justify-center text-center gap-6">
                            <div className="text-blue-700 font-bold text-2xl">{slide.content.course}</div>
                            <div className="text-4xl font-semibold text-gray-800">{slide.content.lecture}</div>
                            <div className="text-5xl font-extrabold text-gray-900">{slide.content.part}</div>
                            <div className="mt-6 text-2xl text-gray-700">Prepared by: {slide.content.faculty}</div>
                        </div>
                    )}

                    {/* Concept / bullet slides */}
                    {slide.type === 'concept' && (
                        <div className="h-full flex flex-col">
                            <h2 className="text-4xl font-bold text-blue-900 mb-6 border-b-4 border-blue-500 pb-3">{slide.title}</h2>
                            <div className="flex-1 flex flex-col justify-center gap-6">
                                {slide.points.map((p, i) => (
                                    <div key={i} className="flex items-start gap-4">
                                        <button onClick={() => toggle(`${currentSlide}-${i}`)} className="mt-1 w-9 h-9 rounded-full bg-blue-500 text-white flex items-center justify-center">{revealed[`${currentSlide}-${i}`] ? <Eye/> : <EyeOff/>}</button>
                                        <div className={`text-3xl transition-all duration-400 ${revealed[`${currentSlide}-${i}`] ? 'opacity-100 translate-x-0' : 'opacity-0 -translate-x-4'}`}><span className="text-blue-600 font-bold mr-3">▸</span>{p}</div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {/* statement-intro (syntax + explanation) */}
                    {slide.type === 'statement-intro' && (
                        <div className="h-full flex flex-col">
                            <h2 className="text-4xl font-bold text-blue-900 mb-4 border-b-4 border-blue-500 pb-3">{slide.title}</h2>
                            <div className="space-y-5">
                                <div className="bg-yellow-50 border-4 border-yellow-400 rounded-lg p-5">
                                    <p className="text-xl text-gray-800">{slide.description}</p>
                                </div>
                                <div className="bg-gray-900 rounded-lg p-5">
                                    <div className="text-green-400 font-semibold text-lg mb-3">Syntax:</div>
                                    <pre className="text-gray-100 font-mono text-lg whitespace-pre-wrap">{slide.syntax}</pre>
                                </div>
                                <div className="bg-blue-50 rounded-lg p-5 border-2 border-blue-300">
                                    <div className="text-blue-800 font-bold text-xl mb-4">Explanation:</div>
                                    <div className="space-y-3">
                                        {slide.explanation.map((e, idx) => (
                                            <div key={idx} className="flex items-start gap-3">
                                                <button onClick={() => toggle(`${currentSlide}-${idx}`)} className="mt-1 w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center">{revealed[`${currentSlide}-${idx}`] ? <Eye/> : <EyeOff/>}</button>
                                                <div className={`text-2xl text-gray-700 transition-all duration-400 ${revealed[`${currentSlide}-${idx}`] ? 'opacity-100 translate-x-0' : 'opacity-0 -translate-x-4'}`}><span className="text-blue-600 mr-2">•</span>{e}</div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* code-with-output */}
                    {slide.type === 'code-with-output' && (
                        <div className="h-full flex flex-col">
                            <h2 className="text-3xl font-bold text-blue-900 mb-3 border-b-4 border-blue-500 pb-2">{slide.title}</h2>
                            {slide.description && <p className="text-lg text-gray-600 mb-3 italic">{slide.description}</p>}
                            <div className="flex-1 flex flex-col">
                                <div className="flex-1 bg-gray-900 rounded-lg p-5 overflow-auto">
                                    <div className="font-mono text-lg">
                                        {slide.code.map((line, li) => {
                                            const groupIdx = slide.revealGroups.findIndex(g => g.includes(li));
                                            const isRevealed = groupIdx !== -1 && revealed[`${currentSlide}-${groupIdx}`];
                                            return (
                                                <div key={li} className={`code-line transition-all duration-300 ${isRevealed ? 'opacity-100' : 'opacity-20'}`}>
                                                    <span className="text-gray-500 select-none mr-4 inline-block w-8 text-right text-sm">{li+1}</span>
                                                    <span className={`${line.includes('//') ? 'text-green-400' : line.includes('#include') ? 'text-pink-400' : line.includes('int') || line.includes('return') ? 'text-blue-400' : line.includes('printf') ? 'text-yellow-300' : 'text-gray-100'}`}>{line || '\u00A0'}</span>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                                <div className="mt-4 bg-green-900 text-green-100 rounded-lg p-4">
                                    <div className="font-semibold text-xl mb-2">Output:</div>
                                    <div className="font-mono text-lg whitespace-pre-wrap">{slide.output}</div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* compare side-by-side */}
                    {slide.type === 'compare' && (
                        <div className="h-full flex flex-col">
                            <h2 className="text-4xl font-bold text-blue-900 mb-4 border-b-4 border-blue-500 pb-3">{slide.title}</h2>
                            <div className="flex gap-6 h-full">
                                <div className="flex-1 bg-gray-50 rounded-lg p-5 border-2 border-gray-200 overflow-auto">
                                    <div className="text-2xl font-bold text-gray-800 mb-3">{slide.left.title}</div>
                                    <div className="font-mono text-lg bg-gray-900 p-4 rounded-lg text-gray-100">
                                        {slide.left.code.map((l, idx) => (
                                            <div key={idx}><span className="text-gray-500 mr-3">{idx+1}</span>{l}</div>
                                        ))}
                                    </div>
                                    <div className="mt-4 bg-gray-800 text-gray-100 p-3 rounded">Output: <span className="font-mono ml-2">{slide.left.output}</span></div>
                                </div>
                                <div className="flex-1 bg-gray-50 rounded-lg p-5 border-2 border-gray-200 overflow-auto">
                                    <div className="text-2xl font-bold text-gray-800 mb-3">{slide.right.title}</div>
                                    <div className="font-mono text-lg bg-gray-900 p-4 rounded-lg text-gray-100">
                                        {slide.right.code.map((l, idx) => (
                                            <div key={idx}><span className="text-gray-500 mr-3">{idx+1}</span>{l}</div>
                                        ))}
                                    </div>
                                    <div className="mt-4 bg-gray-800 text-gray-100 p-3 rounded">Output: <span className="font-mono ml-2">{slide.right.output}</span></div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* practice */}
                    {slide.type === 'practice' && (
                        <div className="h-full flex flex-col">
                            <h2 className="text-4xl font-bold text-blue-900 mb-4 border-b-4 border-blue-500 pb-3">{slide.title}</h2>
                            <div className="flex-1 overflow-auto">
                                <div className="grid grid-cols-2 gap-4">
                                    {slide.problems.map((p, i) => (
                                        <div key={i} className="bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-5 border-2 border-purple-200">
                                            <div className="flex items-start gap-4">
                                                <div className="w-12 h-12 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold text-xl">{i+1}</div>
                                                <div className="text-lg font-semibold text-gray-800">{p}</div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {slide.type === 'thankyou' && (
                        <div className="h-full flex items-center justify-center">
                            <div className="text-center">
                                <h1 className="text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-600">Thank You</h1>
                                <p className="text-2xl text-gray-700 mt-6">Keep practicing — happy coding!</p>
                            </div>
                        </div>
                    )}

                </div>
            </div>
        </div>
    );
};

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<L5 />);
</script>
</body>
</html>
